{"version":3,"sources":["ttlock.coffee"],"names":[],"mappings":"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","file":"ttlock.js","sourceRoot":"../src/browser","sourcesContent":["ttlockName = 'TTLockPlugin'\n\nexec = (method, params) ->\n  new Promise (resolve, reject) -> cordova.exec(resolve, reject, ttlockName, method, params)\n\nLock = {\n  # Universal\n  isScanning: -> exec 'lock_isScanning', []\n  startScan: (resolve, reject) -> cordova.exec(resolve, reject, ttlockName, 'lock_startScan', [])\n  stopScan: -> exec 'lock_stopScan', []\n  init: (lockMac, lockName, lockVersion) -> exec 'lock_init', [lockMac, lockName, lockVersion]\n  reset: (lockData, lockMac) -> exec 'lock_reset', [lockData, lockMac]\n  control: (controlAction, lockData, lockMac) -> exec 'lock_control', [controlAction, lockData, lockMac]\n  getTime: (lockData, lockMac) -> exec 'lock_getTime', [lockData, lockMac]\n  setTime: (time, lockData, lockMac) -> exec 'lock_getTime', [time, lockData, lockMac]\n  getRemoteUnlockSwitchState: (lockData, lockMac) -> exec 'lock_getRemoteUnlockSwitchState', [lockData, lockMac]\n  setRemoteUnlockSwitchState: (enabled, lockData, lockMac) -> exec 'lock_setRemoteUnlockSwitchState', [enabled, lockData, lockMac]\n  getOperationLog: (logType, lockData, lockMac) -> exec 'lock_getOperationLog', [logType, lockData, lockMac]\n\n  addFingerprint: (startDate, endDate, lockData, lockMac, cb) ->\n    if not cb and typeof lockMac is 'function'\n      cb = lockMac\n    cordova.exec(cb, cb, ttlockName, 'lock_addFingerprint', [startDate, endDate, lockData, lockMac])\n  getAllValidFingerprints: (lockData, lockMac) -> exec 'lock_getAllValidFingerprints', [lockData, lockMac]\n  deleteFingerprint: (fingerprintNum, lockData, lockMac) -> exec 'lock_deleteFingerprint', [fingerprintNum, lockData, lockMac]\n  clearAllFingerprints: (lockData, lockMac) -> exec 'lock_clearAllFingerprints', [lockData, lockMac]\n  modifyFingerprintValidityPeriod: (startDate, endDate, fingerprintNum, lockData, lockMac) -> exec 'lock_modifyFingerprintValidityPeriod', [startDate, endDate, fingerprintNum, lockData, lockMac]\n\n  # Android\n  isBLEEnabled: -> exec 'lock_isBLEEnabled', []\n  requestBleEnable: -> exec 'lock_requestBleEnable', []\n  prepareBTService: -> exec 'lock_prepareBTService', []\n  stopBTService: -> exec 'lock_stopBTService', []\n\n  # IOS\n  setupBluetooth: -> exec 'lock_setupBluetooth', []\n}\n\nGateway = {\n  isBLEEnabled: -> exec 'gateway_isBLEEnabled', []\n  requestBleEnable: -> exec 'gateway_requestBleEnable', []\n  prepareBTService: -> exec 'gateway_prepareBTService', []\n  stopBTService: -> exec 'gateway_stopBTService', []\n\n  startScan: (resolve, reject) -> cordova.exec(resolve, reject, ttlockName, 'gateway_startScan', [])\n  stopScan: -> exec 'gateway_stopScan', []\n  connect: (gatewayMac) -> exec 'gateway_connect', [gatewayMac]\n  disconnect: (gatewayMac) -> exec 'gateway_disconnect', [gatewayMac]\n  init: (gatewayMac, uid, userPwd, ssid, wifiPwd) -> exec 'gateway_init', [gatewayMac, uid, userPwd, ssid, wifiPwd]\n  scanWiFi: (gatewayMac, resolve, reject) -> cordova.exec(resolve, reject, ttlockName, 'gateway_scanWiFi', [gatewayMac])\n  upgrade: (gatewayMac) -> exec 'gateway_upgrade', [gatewayMac]\n}\n\nTTLock = {\n  Lock\n  Gateway\n}\n\nif navigator.platform == 'iPhone'\n  TTLock.ControlAction = {\n    Unlock: 1\n    Lock: 2\n  }\nelse\n  TTLock.ControlAction = {\n    Unlock: 3\n    Lock: 6\n  }\n\nTTLock.BluetoothState = {\n  Unknown: 0\n  Resetting: 1\n  Unsupported: 2\n  Unauthorized: 3\n  PoweredOff: 4\n  PoweredOn: 5\n}\n\nif navigator.platform == 'iPhone'\n  TTLock.LogType = {\n    All: 2\n    New: 1\n  }\nelse\n  TTLock.LogType = {\n    All: 11\n    New: 12\n  }\n\nTTLock.LogRecordType = {\n    MobileUnlock: 1\n    ServerUnlock: 3\n    KeyboardPasswordUnlock: 4\n    KeyboardModifyPassword: 5\n    KeyboardRemoveSinglePassword: 6\n    ErrorPasswordUnlock: 7\n    KeyboardRemoveAllPasswords: 8\n    KeyboardPasswordKicked: 9\n    UseDeleteCode: 10\n    PasscodeExpired: 11\n    SpaceInsufficient: 12\n    PasscodeInBlacklist: 13\n    DoorReboot: 14\n    AddIC: 15\n    ClearIC: 16\n    ICUnlock: 17\n    DeleteIC: 18\n    ICUnlockFailed: 25\n    BleLock: 26\n    KeyUnlock: 27\n    GatewayUnlock: 28\n    IllegalUnlock: 29\n    DoorSensorLock: 30\n    DoorSensorUnlock: 31\n    DoorGoOut: 32\n  }\n\nmodule.exports = TTLock\n"]}